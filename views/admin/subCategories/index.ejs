<div class="right_col" role="main">
  <!-- page content starts -->
  <div class="row">
    <div class="col-sm-12 col-md-6 col-lg-4">
        <div class="stcard-box">
            <span class="shade1">3</span>
            <h3 class="title-text mb-0">Total Sub Category</h3>
        </div>
    </div>
    <div class="col-sm-12 col-md-6 col-lg-4">
        <div class="stcard-box">
            <span class="shade2">3</span>
            <h3 class="title-text mb-0">Active Sub Category</h3>
        </div>
    </div>
    <div class="col-sm-12 col-md-6 col-lg-4">
        <div class="stcard-box">
            <span class="shade3">0</span>
            <h3 class="title-text mb-0">Deactive Sub Category</h3>
        </div>
    </div>
  </div>
  <div class="card-block mb-30">
    <h3 class="title-text">Filter Sub Category</h3>
    <ul class="filter-row">
      <li class="filter-col">
        <select class="form-control" id="mainCategory" tabindex="-1" single>
          <option value="">Select MainCategory</option>
          <% for(category of Categories) { %>
            <option value="<%=category.id%>">
              <%=category.name%>
            </option>
            <% } %>
        </select>
      </li>
      <li class="filter-col">
        <select class="form-control" id="subCategory" tabindex="-1" single>
          <option value="">Select SubCategory</option>
          <% for(subCategory of data) { %>
            <option value="<%=subCategory.id%>">
              <%=subCategory.name%>
            </option>
            <% } %>
        </select>
      </li>
      <li class="filter-col">
        <select class="form-control" id="subCategory-status" tabindex="-1" single>
          <option value="">Select Status</option>
          <option value="1">Active</option>
          <option value="0">Deactive</option>
        </select>
      </li>
      <li class="filter-col">
        <button class="btn theme-btn">Filter Results</button>
      </li>
    </ul>
  </div>
  <div class="row">
    <div class="col-md-12 col-sm-12">
      <div class="x_panel">
        <div class="x_title">
          <h3 class="title-text">Sub Categories List</h3>
          <ul class="right-btns">
            <li> <a href="./subCategories/create" class="btn theme-btn" data-toggle="tooltip" rel="tooltip"
                data-placement="top" title="Add SubCategory">+
                Add SubCategory</a>
            </li>
          </ul>
        </div>
        <div class="x_content">
          <div class="row">
            <div class="col-sm-12">
              <div class="card-box table-responsive">
                <table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap"
                  cellspacing="0" width="100%">
                  <thead>
                    <tr>
                      <th>S.No</th>
                      <th>Name</th>
                      <th>Main Category</th>
                      <th>Status</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% let i=0; for(subCategory of data) { %>
                      <tr>
                        <td>
                          <%=++i%>
                        </td>
                        <td>
                          <%=subCategory.name%>
                        </td>
                        <td>
                          <%=subCategory.category_id.name%>
                        </td>
                        <td>
                          <label class="checkbox-inline">
                            <input type="checkbox" name="status" class="record-status" data-toggle="toggle"
                              data-on="Active" data-off="Deactive" data-onstyle="info" data-offstyle="danger"
                              data-url="/subCategories/update-status" data-uid="<%=subCategory.id%>" id="toggle-trigger"
                              <%=subCategory.status==1 ? 'checked' : '' %>>
                          </label>
                        </td>
                        <td>
                          <div class="d-flex align-items-center">
                            <a class="" href="/subCategories/edit/<%=subCategory.id%>" data-toggle="tooltip"
                              rel="tooltip" data-placement="top" title="Edit"><img src="/images/edit.svg"
                                alt="icon"></a>

                            <a href="javascript:void(0)" class="ml-2"
                              onclick="confirmBeforeDeletion('/subCategories/destroy/<%=subCategory.id%>')"> <img
                                src="/images/trash.svg" alt="icon" data-toggle="tooltip" rel="tooltip"
                                data-placement="top" title="Delete"></a>
                          </div>
                        </td>
                      </tr>
                      <% } %>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- page content end -->
</div>

<script type="text/javascript">
  $(document).ready(function () {
    $("#mainCategory").select2({
      placeholder: "Select MainCategory",
      allowClear: false,
    });
    $("#subCategory").select2({
      placeholder: "Select SubCategory",
      allowClear: false,
    });
    $("#subCategory-status").select2({
      placeholder: "Select Status",
      allowClear: false,
    });
  });
</script>